/* jQuery ColorPicker
   Written by Virgil Reboton(vreboton@gmail.com)

   ColorPicker function structures and attahcment is base on
   jQuery UI Date Picker v3.3beta
   by Marc Grabanski (m@marcgrabanski.com) and Keith Wood (kbwood@virginbroadband.com.au).

   ColorPicker render data is base on
   http://www.mattkruse.com/javascript/colorpicker/
   by Matt Kruse
*/
(function(b){function f(){this._nextId=0;this._inst=[];this._curInst=null;this._colorpickerShowing=!1;this._colorPickerDiv=b('<div id="colorPickerDiv"></div>')}function g(){this._id=b.colorPicker._register(this);this._input=null;this._colorPickerDiv=b.colorPicker._colorPickerDiv;this._sampleSpan=null}b.extend(f.prototype,{markerClassName:"hasColorPicker",_register:function(a){var b=this._nextId++;this._inst[b]=a;return b},_getInst:function(a){return this._inst[a]||a},_doKeyDown:function(a){b.colorPicker._getInst(this._colId);
if(b.colorPicker._colorpickerShowing)switch(a.keyCode){case 9:b.colorPicker.hideColorPicker();break;case 27:b.colorPicker.hideColorPicker()}else a.keyCode==40&&b.colorPicker.showFor(this)},_resetSample:function(){var a=b.colorPicker._getInst(this._colId);a._sampleSpan.css("background-color",a._input.value);alert(a._input.value)},_hasClass:function(a,b){var c=a.attr("class");return c&&c.indexOf(b)>-1},showFor:function(a){a=a.jquery?a[0]:typeof a=="string"?b(a)[0]:a;a=a.nodeName&&a.nodeName.toLowerCase()==
"input"?a:this;if(b.colorPicker._lastInput!=a&&!b.colorPicker._colorpickerShowing){var d=b.colorPicker._getInst(a._colId);b.colorPicker.hideColorPicker();b.colorPicker._lastInput=a;if(!b.colorPicker._pos)b.colorPicker._pos=b.colorPicker._findPos(a),b.colorPicker._pos[1]+=a.offsetHeight;var c=!1;b(a).parents().each(function(){c|=b(this).css("position")=="fixed"});c&&b.browser.opera&&(b.colorPicker._pos[0]-=document.documentElement.scrollLeft,b.colorPicker._pos[1]-=document.documentElement.scrollTop);
d._colorPickerDiv.css("position",b.blockUI?"static":c?"fixed":"absolute").css("left",b.colorPicker._pos[0]+"px").css("top",b.colorPicker._pos[1]+1+"px");b.colorPicker._pos=null;b.colorPicker._showColorPicker(d);return this}},_findPos:function(a){for(;a&&(a.type=="hidden"||a.nodeType!=1);)a=a.nextSibling;var b=curtop=0;if(a&&a.offsetParent){b=a.offsetLeft;for(curtop=a.offsetTop;a=a.offsetParent;){var c=b;b+=a.offsetLeft;b<0&&(b=c);curtop+=a.offsetTop}}return[b,curtop]},_checkExternalClick:function(a){b.colorPicker._curInst&&
(a=b(a.target),a.parents("#colorPickerDiv").length==0&&b.colorPicker._colorpickerShowing&&!b.blockUI&&a.text()!=b.colorPicker._curInst._colorPickerDiv.text()&&b.colorPicker.hideColorPicker())},hideColorPicker:function(){var a=this._curInst;if(a){if(this._colorpickerShowing)this._colorpickerShowing=!1,this._lastInput=null,this._colorPickerDiv.css("position","absolute").css("left","0px").css("top","-1000px"),b.blockUI&&(b.unblockUI(),b("body").append(this._colorPickerDiv)),this._curInst=null;a._input[0].value!=
b.css(a._sampleSpan,"background-color")&&a._sampleSpan.css("background-color",a._input[0].value)}},_connectColorPicker:function(a,d){var c=b(a);if(!this._hasClass(c,this.markerClassName))b(c).attr("autocomplete","OFF"),d._input=b(c),d._sampleSpan=b('<span class="ColorPickerDivSample" style="background-color:'+d._input[0].value+";height:"+d._input[0].offsetHeight+';">&nbsp;</span>'),c.after(d._sampleSpan),d._sampleSpan.click(function(){c.focus()}),c.focus(this.showFor),c.addClass(this.markerClassName).keydown(this._doKeyDown),
c[0]._colId=d._id},_showColorPicker:function(a){a=this._getInst(a);this._updateColorPicker(a);a._colorPickerDiv.css("width",a._startTime!=null?"10em":"6em");a._colorPickerDiv.show("fast");a._input[0].type!="hidden"&&a._input[0].focus();this._curInst=a;this._colorpickerShowing=!0},_updateColorPicker:function(a){a._colorPickerDiv.empty().append(a._generateColorPicker());a._input&&a._input[0].type!="hidden"&&(a._input[0].focus(),b("td.color",a._timePickerDiv).unbind().mouseover(function(){a._sampleSpan.css("background-color",
b.css(this,"background-color"))}).click(function(){a._setValue(this)}))}});b.extend(g.prototype,{_get:function(a){return this._settings[a]!=null?this._settings[a]:b.colorPicker._defaults[a]},_getValue:function(){if(this._input&&this._input[0].type!="hidden"&&this._input[0].value!="")return this._input[0].value;return null},_setValue:function(a){if(this._input&&this._input[0].type!="hidden")this._input[0].value=b.attr(a,"title"),b(this._input[0]).change();b.colorPicker.hideColorPicker()},_generateColorPicker:function(){for(var a=
["#000000","#000033","#000066","#000099","#0000CC","#0000FF","#330000","#330033","#330066","#330099","#3300CC","#3300FF","#660000","#660033","#660066","#660099","#6600CC","#6600FF","#990000","#990033","#990066","#990099","#9900CC","#9900FF","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#003300","#003333","#003366","#003399","#0033CC","#0033FF","#333300","#333333","#333366","#333399","#3333CC","#3333FF","#663300","#663333",
"#663366","#663399","#6633CC","#6633FF","#993300","#993333","#993366","#993399","#9933CC","#9933FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#006600","#006633","#006666","#006699","#0066CC","#0066FF","#336600","#336633","#336666","#336699","#3366CC","#3366FF","#666600","#666633","#666666","#666699","#6666CC","#6666FF","#996600","#996633","#996666","#996699","#9966CC","#9966FF","#CC6600","#CC6633","#CC6666","#CC6699","#CC66CC",
"#CC66FF","#FF6600","#FF6633","#FF6666","#FF6699","#FF66CC","#FF66FF","#009900","#009933","#009966","#009999","#0099CC","#0099FF","#339900","#339933","#339966","#339999","#3399CC","#3399FF","#669900","#669933","#669966","#669999","#6699CC","#6699FF","#999900","#999933","#999966","#999999","#9999CC","#9999FF","#CC9900","#CC9933","#CC9966","#CC9999","#CC99CC","#CC99FF","#FF9900","#FF9933","#FF9966","#FF9999","#FF99CC","#FF99FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#33CC00","#33CC33",
"#33CC66","#33CC99","#33CCCC","#33CCFF","#66CC00","#66CC33","#66CC66","#66CC99","#66CCCC","#66CCFF","#99CC00","#99CC33","#99CC66","#99CC99","#99CCCC","#99CCFF","#CCCC00","#CCCC33","#CCCC66","#CCCC99","#CCCCCC","#CCCCFF","#FFCC00","#FFCC33","#FFCC66","#FFCC99","#FFCCCC","#FFCCFF","#00FF00","#00FF33","#00FF66","#00FF99","#00FFCC","#00FFFF","#33FF00","#33FF33","#33FF66","#33FF99","#33FFCC","#33FFFF","#66FF00","#66FF33","#66FF66","#66FF99","#66FFCC","#66FFFF","#99FF00","#99FF33","#99FF66","#99FF99","#99FFCC",
"#99FFFF","#CCFF00","#CCFF33","#CCFF66","#CCFF99","#CCFFCC","#CCFFFF","#FFFF00","#FFFF33","#FFFF66","#FFFF99","#FFFFCC","#EEEEEE","#111111","#222222","#333333","#444444","#555555","#666666","#777777","#888888","#999999","#A5A5A5","#AAAAAA","#BBBBBB","#C3C3C3","#CCCCCC","#D2D2D2","#DDDDDD","#E1E1E1","#FFFFFF"],b=a.length,c="<table border='1px' cellspacing='0' cellpadding='0'>",e=0;e<b;e++)if(e%18==0&&(c+="<tr>"),c+='<td class="color" title="'+a[e]+'" style="background-color:'+a[e]+'"><label>&nbsp;&nbsp;&nbsp;</label></td>',
e+1>=b||(e+1)%18==0)c+="</tr>";c+='<tr><td title="" style="background-color:#999" class="color" colspan="18" align="center"><label>No Color</label></td></tr>';c+="</table>";return c}});b.fn.attachColorPicker=function(){return this.each(function(){if(this.nodeName.toLowerCase()=="input"){var a=new g;b.colorPicker._connectColorPicker(this,a)}})};b.fn.getValue=function(){var a=this.length>0?b.colorPicker._getInst(this[0]._colId):null;return a?a._getValue():null};b.fn.setValue=function(a){var d=this.length>
0?b.colorPicker._getInst(this[0]._colId):null;d&&d._setValue(a)};b(document).ready(function(){b.colorPicker=new f;b(document.body).append(b.colorPicker._colorPickerDiv).mousedown(b.colorPicker._checkExternalClick)})})(jQuery);
